{"version":3,"sources":["../../src/models/notification.model.js"],"names":["NotificationSchema","Schema","targetUser","type","Number","ref","required","subjectType","String","enum","subject","refPath","text","seen","Boolean","default","creationDate","Date","now","set","transform","doc","ret","options","id","_id","__v","autoIncrement","initialize","mongoose","connection","plugin","model","startAt"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,qBAAqB,IAAIC,gBAAJ,CAAW;AAClCC,gBAAY;AACRC,cAAMC,MADE;AAERC,aAAK,MAFG;AAGRC,kBAAU;AAHF,KADsB;AAMlCC,iBAAa;AACTJ,cAAMK,MADG;AAETC,cAAO,CAAC,QAAD,EAAW,kBAAX,EAA+B,KAA/B,EAAsC,sBAAtC,EAA8D,iBAA9D,EAAiF,cAAjF;AAFE,KANqB;AAUlCC,aAAS;AACLP,cAAOC,MADF;AAELO,iBAAS;AAFJ,KAVyB;AAclCC,UAAM;AACFT,cAAMK,MADJ;AAEFF,kBAAU;AAFR,KAd4B;AAkBlCO,UAAM;AACFV,cAAMW,OADJ;AAEFC,iBAAS;AAFP,KAlB4B;AAsBlCC,kBAAc;AACVb,cAAMc,IADI;AAEVF,iBAASE,KAAKC;AAFJ;AAtBoB,CAAX,CAA3B;;AA4BAlB,mBAAmBmB,GAAnB,CAAuB,QAAvB,EAAiC;AAC7BC,eAAW,mBAACC,GAAD,EAAMC,GAAN,EAAWC,OAAX,EAAuB;AAC9BD,YAAIE,EAAJ,GAASF,IAAIG,GAAb;AACA,eAAOH,IAAIG,GAAX;AACA,eAAOH,IAAII,GAAX;AACH;AAL4B,CAAjC;;AASAC,gCAAcC,UAAd,CAAyBC,mBAASC,UAAlC;AACA9B,mBAAmB+B,MAAnB,CAA0BJ,gCAAcI,MAAxC,EAAgD;AAC5CC,WAAO,mBADqC;AAE5CC,aAAS;AAFmC,CAAhD;;kBAKeJ,mBAASG,KAAT,CAAe,mBAAf,EAAoChC,kBAApC,C","file":"notification.model.js","sourcesContent":["import mongoose, { Schema } from 'mongoose';\nimport autoIncrement from 'mongoose-auto-increment';\n\nconst NotificationSchema = new Schema({\n    targetUser: {\n        type: Number,\n        ref: 'user',\n        required: true\n    },\n    subjectType: {\n        type: String,\n        enum : ['bricol', 'bricol-bt-cities', 'bid', 'request-trip-bt-city', 'special-request', 'trip-bt-city']\n    },\n    subject: {\n        type : Number, \n        refPath: 'subjectType',\n    },\n    text: {\n        type: String,\n        required: true\n    },\n    seen: {\n        type: Boolean,\n        default: false\n    },\n    creationDate: {\n        type: Date,\n        default: Date.now\n    }\n})\n\nNotificationSchema.set('toJSON', {\n    transform: (doc, ret, options) => {\n        ret.id = ret._id;\n        delete ret._id;\n        delete ret.__v;\n    }\n});\n\n\nautoIncrement.initialize(mongoose.connection);\nNotificationSchema.plugin(autoIncrement.plugin, {\n    model: 'order-notificaton',\n    startAt: 1,\n});\n\nexport default mongoose.model(\"order-notificaton\", NotificationSchema); "]}