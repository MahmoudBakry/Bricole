{"version":3,"sources":["../../src/models/history.model.js"],"names":["HistorySchema","Schema","serviceType","type","String","enum","service","Number","refPath","required","bricoler","ref","user","status","default","creationDate","Date","now","set","transform","doc","ret","options","id","_id","__v","autoIncrement","initialize","mongoose","connection","plugin","model","startAt"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,gBAAgB,IAAIC,gBAAJ,CAAW;AAC7BC,iBAAa;AACTC,cAAMC,MADG;AAETC,cAAM,CAAC,QAAD,EAAW,kBAAX,EAA+B,iBAA/B;AAFG,KADgB;AAK7BC,aAAS;AACLH,cAAMI,MADD;AAELC,iBAAS,aAFJ;AAGLC,kBAAU;AAHL,KALoB;;AAW7BC,cAAU;AACNP,cAAMI,MADA;AAENI,aAAK;AAFC,KAXmB;AAe7BC,UAAM;AACFT,cAAMI,MADJ;AAEFI,aAAK;AAFH,KAfuB;AAmB7BE,YAAQ;AACJV,cAAMC,MADF;AAEJC,cAAM,CAAC,UAAD,EAAa,YAAb,EAA2B,UAA3B,EAAuC,UAAvC,EAAmD,SAAnD,EAA8D,MAA9D,CAFF;AAGJS,iBAAU;AAHN,KAnBqB;AAwB7BC,kBAAc;AACVZ,cAAMa,IADI;AAEVF,iBAASE,KAAKC;AAFJ;;AAxBe,CAAX,CAAtB;;AA+BAjB,cAAckB,GAAd,CAAkB,QAAlB,EAA4B;AACxBC,eAAW,mBAAUC,GAAV,EAAeC,GAAf,EAAoBC,OAApB,EAA6B;AACpCD,YAAIE,EAAJ,GAASF,IAAIG,GAAb;AACA,eAAOH,IAAIG,GAAX;AACA,eAAOH,IAAII,GAAX;AACH;AALuB,CAA5B;;AAQAC,gCAAcC,UAAd,CAAyBC,mBAASC,UAAlC;AACA7B,cAAc8B,MAAd,CAAqBJ,gCAAcI,MAAnC,EAA2C;AACvCC,WAAO,SADgC;AAEvCC,aAAS;AAF8B,CAA3C;;kBAKeJ,mBAASG,KAAT,CAAe,SAAf,EAA0B/B,aAA1B,C","file":"history.model.js","sourcesContent":["import mongoose, { Schema } from \"mongoose\";\nimport autoIncrement from 'mongoose-auto-increment';\n\nconst HistorySchema = new Schema({\n    serviceType: {\n        type: String,\n        enum: ['bricol', 'bricol-bt-cities', 'special-request',]\n    },\n    service: {\n        type: Number,\n        refPath: 'serviceType',\n        required: true\n    },\n\n    bricoler: {\n        type: Number,\n        ref: \"user\"\n    },\n    user: {\n        type: Number,\n        ref: 'user'\n    },\n    status: {\n        type: String,\n        enum: ['pendding', 'inProgress', 'assigned', 'accepted', 'ignored', 'done'],\n        default : 'pendding'\n    },\n    creationDate: {\n        type: Date,\n        default: Date.now\n    }\n\n})\n\nHistorySchema.set('toJSON', {\n    transform: function (doc, ret, options) {\n        ret.id = ret._id;\n        delete ret._id;\n        delete ret.__v;\n    }\n});\n\nautoIncrement.initialize(mongoose.connection);\nHistorySchema.plugin(autoIncrement.plugin, {\n    model: 'history',\n    startAt: 1,\n});\n\nexport default mongoose.model(\"history\", HistorySchema);"]}